import tensorflow as tf
import numpy as np

table = {0: 'bir1an010b_Basalt-_PV-3b_Spectral_reflectance_and_emittance_of_rocks_and_mi...', 
 1: 'bir1an010c_Basalt-_PV-3c_Spectral_reflectance_and_emittance_of_rocks_and_mi...', 
 2: 'bir1an026a_Basalt-_IC-1A_Spectral_reflectance_and_emittance_of_rocks_and_mi...',3: 'bir1be065_Basalt_Glass-_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 4: 'bir1be067_Basalt_Glass-_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 5: 'bir1je013_Lunar_soil_simulant_13_Highlands_Lunar_soil_simulants', 6: 'bir1lm044_MIL05035_43_pyroxene_D__45_um_Silicate_Ino__Pyroxene__from_lunar_basalt', 7: 'bir1lm045_MIL05035_43_bulk_B__125_um_unbrecciated_lunar_meteorite__coarse_texture', 8: 'bir1lm046_MIL05035_43_bulk_D__45_um_unbrecciated_lunar_meteorite__coarse_texture', 9: 'bir1lm047_LAP02205_63_bulk_B__125_um_Mare_basalt', 10: 'bir1lm048_LAP02205_63_bulk_D__45_um_Mare_basalt', 11: 'bir1lm051b_Dhofar_307_125-500_um_Lunar_meteorite__feldspathic_fragmental_breccia', 12: 'bir1lm051c_Dhofar_307__125_um_Lunar_meteorite__feldspathic_fragmental_breccia', 13: 'bir1lm051_Dhofar_307_cut_chip_Lunar_meteorite__feldspathic_fragmental_breccia', 14: 'bir1lm052b_DaG_1042_05_125-500_um_Breccia__Lunar_Feldspathic_Regolith_Breccia__0.97_...', 15: 'bir1lm052c_DaG_1042_05__125_um_Breccia__Lunar_Feldspathic_Regolith_Breccia__0.97_...', 16: 'bir1lm052_DaG_1042_05_cut_chip_Breccia__Lunar_Feldspathic_Regolith_Breccia__0.97_...', 17: 'bir1lm053_QUE93069_58_bulk_piece_B__125_um_Breccia__Lunar_Feldspathic_Breccia', 18: 'bir1lm054_QUE93069_58_bulk_piece_D__45_um_Breccia__Lunar_Feldspathic_Breccia', 19: 'bir2be169_Olivine_Nontronite-_30_OLV-SC_125-250_um__70_NG..._Spectral_mixture_modeling_PGG__Active_missions__S...', 20: 'biramt313_NWA_2977_slab_Igneous__Olivine_Gabbro__Purchased_from_catchafall...', 21: 'c10m01_Y-791197_72_Antarctic_Meteorite_of_Presumed_Lunar_Origin', 22: 'c1ao02_Black_Olivine_F80_Olivine_prepared_from_PO-22_by_B._Fogel._Heate...', 23: 'c1be110_Basalt-_BAS_79-3b_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 24: 'c1be114_Nontronite_Basalt-_50_NG-1__50_BAS_79-3b_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 25: 'c1be115_Nontronite_Basalt-_70_NG-1__30_BAS_79-3b_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 26: 'c1be124_Altered_Basalt-_Icel009C_Earth_analogues_for_hydrothermal_enviornments_seen...', 27: 'c1be131_Olivine_Basalt_Glass-_90_OLV-SC__10_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 28: 'c1be132_Olivine_Basalt_Glass-_70_OLV-SC__30_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 29: 'c1be133_Olivine_Basalt_Glass-_50_OLV-SC__50_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 30: 'c1be134_Olivine_Basalt_Glass-_30_OLV-SC__70_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 31: 'c1be135_Olivine_Basalt_Glass-_10_OLV-SC__90_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 32: 'c1be136_Olivine_Basalt_Glass-_5_OLV-SC__95_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 33: 'c1be140_Altered_Basalt-_Hvalfj011A_Earth_analogues_for_hydrothermal_enviornments_seen...', 34: 'c1be142_Altered_Basalt-_Hvalfj025A_Earth_analogues_for_hydrothermal_enviornments_seen...', 35: 'c1be147_Altered_Basalt-_Hvalfj055A_Earth_analogues_for_hydrothermal_enviornments_seen...', 36: 'c1be149_Altered_Basalt-_Hvalfj054A_Earth_analogues_for_hydrothermal_enviornments_seen...', 37: 'c1be150_Olivine_Nontronite_Basalt_Glass-_16_OLV-SC__16_..._Spectral_mixture_modeling_PGG__MDAP__Active_missi...', 38: 'c1be151_Olivine_Nontronite_Basalt_Glass-_16_OLV-SC__42_..._Spectral_mixture_modeling_PGG__MDAP__Active_missi...', 39: 'c1be154_Olivine_Nontronite_Basalt_Glass-_42_OLV-SC__16_..._Spectral_mixture_modeling_PGG__MDAP__Active_missi...', 40: 'c1be155_Olivine_Nontronite_Basalt_Glass-_42_OLV-SC__42_..._Spectral_mixture_modeling_PGG__MDAP__Active_missi...', 41: 'c1be165_Olivine_Nontronite-_95_OLV-SC_125-250_um__5_NG-..._Spectral_mixture_modeling_PGG__Active_missions__S...', 42: 'c1be166_Olivine_Nontronite-_90_OLV-SC_125-250_um__10_NG..._Spectral_mixture_modeling_PGG__Active_missions__S...', 43: 'c1be172_Basalt_Nontronite-_90_wt_BAS_79-3b_125-250_um__1..._Spectral_mixture_modeling_PGG__Active_missions__S...', 44: 'c1be46_Nontronite_Basalt_Glass-_10_NG-1__90_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 45: 'c1be60_Basalt_Glass-_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 46: 'c1be61_Basalt_Glass-_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 47: 'c1be65_Basalt_Glass-_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 48: 'c1be67_Basalt_Glass-_BAS_Gl_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 49: 'c1be72_Basalt_Glass-_BAS_79-3b_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 50: 'c1be77_Basalt_Glass-_BAS_79-3b_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 51: 'c1ck02_Globe_Olivine_38-63_um_Silicate_Neso__Olivine__See_Byrne_et_al._2015__L...', 52: 'c1ck06_Augite_38-63_um_Silicate_Ino__Pyroxene_Clinopyroxene_Augite__See...', 53: 'c1ck07_Diopside_38-63_um_Silicate_Ino__Pyroxene_Clinopyroxene_Diopside__S...', 54: 'c1cp17_Pyroxene_Clinopyroxene-_481_652-D_Px2_Extracted_from_Gabroic_norite.Standard_for_shock_e...', 55: 'c1cp18_Pyroxene_Clinopyroxene-_481_652-A0_Px2_Extracted_from_shocked_50-600_Kbar_Gabbroic_nori...', 56: 'c1dd128_93406_CPX_JH__45_um_Silicate_Ino__Pyroxene_Ferric_Clinpyroxene', 57: 'c1dd129_Ba-2-101-B_CPX_JH_Silicate_Ino__Pyroxene_Ferric_Clinpyroxene', 58: 'c1dd130_Ba-2-101-B_OPX_JH_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene', 59: 'c1dd131_Ba-2-101-C_OPX_JH_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene', 60: 'c1dd132_Ba-2-101-D_OPX_JH_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene', 61: 'c1dd133_Ba-2-101-E_CPX_JH_Silicate_Ino__Pyroxene_Ferric_Clinpyroxene', 62: 'c1dd138_Ep-1-42A_CPX_JH_Silicate_Ino__Pyroxene_Ferric_Clinpyroxene', 63: 'c1dd146_GK-7_OPX_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene', 64: 'c1dd149_H366-30_Pure_OPX_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene', 65: 'c1dd150_SC-1-1_CPX_not_pyroxene_Silicate_Ino__Pyroxene_Ferric_Clinpyroxene', 66: 'c1dd152_Hershell_diopside_Silicate_Ino__Pyroxene_Ferric_Clinpyroxene_Diops...', 67: 'c1dd153_Kilosa_enstatite_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene_Enst...', 68: 'c1dd154_Zen_1_enstatite_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene_Enst...', 69: 'c1dd155_Lindsley_pigeonite_1_Wo8_x20_G_Silicate_Ino__Pyroxene_Clinopyroxene_Pigeonite', 70: 'c1dd157_Lindsley_pigeonite_3_Wo8_x30_F_Silicate_Ino__Pyroxene_Clinopyroxene_Pigeonite', 71: 'c1dd162_NMNH_117671_pigeonite_Silicate_Ino__Pyroxene_Ferric_Clinpyroxene_Pigeo...', 72: 'c1dd163_NMNH_120414-1_enstatite_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene_Enst...', 73: 'c1dd164_NMNH_1218247_opx_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene', 74: 'c1dd166_NMNH_14440_enstatite_Silicate_Ino__Pyroxene_Ferric_Orthopyroxene_Enst...', 75: 'c1dd168_LAP_91900_72_diogenite_opx_Silicate_Ino__Pyroxene_Orthopyroxene', 76: 'c1dd171_GRA_95209_276_lodranite_pyroxene_Silicate_Ino__Pyroxene', 77: 'c1dd85_Olivine_Forsterite-_Fa_0_Fo_100__45_um_From_Don_Lindsley._See_Dyar__M._D._et_al._2009_A...', 78: 'c1dd88_Olivine-_Fa_25_Fo_75_B_From_Don_Lindsley.__See_Dyar__M._D._et_al._2009_...', 79: 'c1dd89_Olivine-_Fa_30_Fo_70_A_From_Don_Lindsley.__See_Dyar__M._D._et_al._2009_...', 80: 'c1dd92p_Olivine-_Fa_45_Fo_55_A_pellet_From_Don_Lindsley.__Pressed_by_Tim_Glotch.__See_Dy...', 81: 'c1dd98p_Olivine_Fayalite-_Fa_100_Fo_0_pellet_From_Don_Lindsley.__Pressed_by_Tim_Glotch.__See_Dy...', 82: 'c1je01_Lunar_soil_simulant_1_Highland_Lunar_soil_simulants', 83: 'c1je02_Lunar_soil_simulant_2_Highland_Lunar_soil_simulants', 84: 'c1je04_Lunar_soil_simulant_4_Highland_Lunar_soil_simulants', 85: 'c1je05_Lunar_soil_simulant_5_Highland_Lunar_soil_simulants', 86: 'c1je06_Lunar_soil_simulant_6_Highland_Lunar_soil_simulants', 87: 'c1je07_Lunar_soil_simulant_7_Highland_Lunar_soil_simulants', 88: 'c1je08_Lunar_soil_simulant_8_Highland_Lunar_soil_simulants', 89: 'c1je09_Lunar_soil_simulant_9_Highland_Lunar_soil_simulants', 90: 'c1je13_Lunar_soil_simulant_13_Highlands_Lunar_soil_simulants', 91: 'c1lm25_Thin_Section_II-1_Anorthite_Silicate____1_2_Anorthites_3_4Fayalites5_6_Enstati...', 92: 'c1lm34_ALHA81005_97_chip_Breccia__Lunar_Feldspathic_Breccia', 93: 'c1lm35_QUE93069_58_chip_Breccia__Lunar_Feldspathic_Breccia', 94: 'c1lm36_MIL05035_43_chip_Igneous__Lunar_Unbrecciated_Basalt_', 95: 'c1lm37_EET87521_87_chip_Breccia__Lunar_Basaltic_Breccia', 96: 'c1lm38_EET96008_47_chip_Breccia__Lunar_Basaltic_Breccia', 97: 'c1lm39_LAP02205_63_chip_Igneous__Lunar_Unbrecciated_Basalt_', 98: 'c1lm41_MIL05035_43_pyroxene_B__125_um_Silicate_Ino__Pyroxene__from_lunar_basalt', 99: 'c1lm42_MIL05035_43_maskelynite_B__125_um_Silicate_Tecto__Feldspar_Plagioclase__from_lunar...', 100: 'c1lm51b_Dhofar_307_125-500_um_Lunar_meteorite__feldspathic_fragmental_breccia', 101: 'c1lm51c_Dhofar_307__125_um_Lunar_meteorite__feldspathic_fragmental_breccia', 102: 'c1lm51_Dhofar_307_cut_chip_Lunar_meteorite__feldspathic_fragmental_breccia', 103: 'c1lm52b_DaG_1042_05_125-500_um_Breccia__Lunar_Feldspathic_Regolith_Breccia__0.97_...', 104: 'c1lm52c_DaG_1042_05__125_um_Breccia__Lunar_Feldspathic_Regolith_Breccia__0.97_...', 105: 'c1lm52_DaG_1042_05_cut_chip_Breccia__Lunar_Feldspathic_Regolith_Breccia__0.97_...', 106: 'c1lr109_61141_75_Highland____Water_sieved_for_LSCC_Taylor_project...', 107: 'c1lr223_62241_21_plagioclase_D__45_um_Silicate_Tecto__Feldspar_Plagioclase__Plagioclas...', 108: 'c1lr245c_65315__153_45-75_um_Highland__Anorthosite__Anorthosite_dry-sieved_to_4...', 109: 'c1lr247b_69955__65__45_um_Highland__Anorthosite__Anorthosite_dry-sieved_to_0...', 110: 'c1lr253_61016_538_about__200_um__21_mg_Highland__Anorthosite_FAN__Sample_has_silver_threa...', 111: 'c1lr38_68501_601__10_um_Highland__Bulk_', 112: 'c1mx63p_95_wt_Anorthite__45_um__5_wt_Bronzite__45_um..._Mixture___Feldspar_Plagioclase_Anorthite_Ilmenite_...', 113: 'c1op17_481_652-D_Px1_Silicate_Ino__Pyroxene_Orthopyroxene__Extracted_...', 114: 'c1op19_481_652-A1_Px1_Silicate_Ino__Shocked_Orthopyroxene_Pyroxene__Fr...', 115: 'c2be172_Basalt_Nontronite-_90_wt_BAS_79-3b_125-250_um__1..._Spectral_mixture_modeling_PGG__Active_missions__S...', 116: 'c2be72_Basalt_Glass-_BAS_79-3b_Mineral_mixtures_and_deriving_abundance_using_VNIR...', 117: 'c2dd76_DH-101-B_Tan_Olivine_3.9__ferric_iron', 118: 'c2dd77_DH-101-C_Green_Olivine_4.7__ferric_iron', 119: 'c2dd78_DH-101-D_Green_Olivine_4.5__ferric_iron', 120: 'c2dd79_KBH-94-1_Tan_Olivine_0__ferric_iron', 121: 'c2lm41_MIL05035_43_pyroxene_B__125_um_Silicate_Ino__Pyroxene__from_lunar_basalt', 122: 'c2lm42_MIL05035_43_maskelynite_B__125_um_Silicate_Tecto__Feldspar_Plagioclase__from_lunar...', 123: 'c2mb29_A-881757_Igneous__Gabbroic__A-881757_Lunar_Gabbrocontaining...', 124: 'c3lm25_Thin_Section_II-3_Fayalite__Silicate____1_2_Anorthites_3_4Fayalites5_6_Enstati...', 125: 'c3mb29_A-881757_Silicate_Ino__Pyroxene__A-881757_Lunar_Gabbrocon...', 126: 'c4mb29_A-881757_Igneous__Gabbroic__A-881757_Lunar_Gabbrocontaining...', 127: 'c5lm25_Thin_Section_II-5_Enstatite_Silicate____1_2_Anorthites_3_4Fayalites5_6_Enstati...', 128: 'c6mb29_A-881757_Igneous__Gabbroic__A-881757_Lunar_Gabbrocontaining...', 129: 'c7mb29_A-881757_Silicate_Ino__Pyroxene__A-881757_Lunar_Gabbrocon...', 130: 'c8mb29_A-881757_Silicate_Ino__Pyroxene__A-881757_Lunar_Gabbrocon...', 131: 'c9mb29_A-881757_Igneous__Gabbroic__A-881757_Lunar_Gabbrocontaining...', 132: 'cabe254_Basaltic_Glass-BAS-79-3b_Photometric_measurements_of_mineral_materials_foun...', 133: 'cabe255_Olivine-_OLV-SC_Photometric_measurements_of_mineral_materials_foun...', 134: 'calm34_ALHA81005_97_chip_Breccia__Lunar_Feldspathic_Breccia', 135: 'calm35_QUE93069_58_chip_Breccia__Lunar_Feldspathic_Breccia', 136: 'calmn2_Y-791197_72_Antarctic_Meteorite_of_Presumed_Lunar_Origin', 137: 'cama01_ALHA81005_Anomalous_ACANOM__Antarctic_meteorite_of_presume...', 138: 'camt313_NWA_2977_slab_Igneous__Olivine_Gabbro__Purchased_from_catchafall...', 139: 'cbba01_Basalt-_BAS101B_Unknown_Description', 140: 'cblm02_Y-791197_90_Antarctic_Meteorite_of_Presumed_Lunar_Origin', 141: 'cblm34_ALHA81005_97_chip_Breccia__Lunar_Feldspathic_Breccia', 142: 'cblm35_QUE93069_58_chip_Breccia__Lunar_Feldspathic_Breccia', 143: 'cclm34_ALHA81005_97_chip_Breccia__Lunar_Feldspathic_Breccia', 144: 'cclm35_QUE93069_58_chip_Breccia__Lunar_Feldspathic_Breccia', 145: 'cdlm34_ALHA81005_97_chip_Breccia__Lunar_Feldspathic_Breccia', 146: 'cdlm35_QUE93069_58_chip_Breccia__Lunar_Feldspathic_Breccia', 147: 'celm34_ALHA81005_97_chip_Breccia__Lunar_Feldspathic_Breccia', 148: 'celm35_QUE93069_58_chip_Breccia__Lunar_Feldspathic_Breccia', 149: 'cflm34_ALHA81005_97_chip_Breccia__Lunar_Feldspathic_Breccia', 150: 'cflm35_QUE93069_58_chip_Breccia__Lunar_Feldspathic_Breccia', 151: 'cfmh53_Nuevo_Mercurio_Ordinary_Chondrite__H5_Olivine-Bronzite_', 152: 'cgmh53_Nuevo_Mercurio_Ordinary_Chondrite__H5_Olivine-Bronzite_', 153: 'chmh53_Nuevo_Mercurio_Ordinary_Chondrite__H5_Olivine-Bronzite_', 154: 'cimh53_Nuevo_Mercurio_Ordinary_Chondrite__H5_Olivine-Bronzite__I50_50_m...', 155: 'cnlm01_Y-791197_72_Antarctic_Meteorite_of_Presumed_Lunar_Origin', 156: 'cnmb29_A-881757_Igneous__Gabbroic__A-881757_Lunar_Gabbrocontaining...', 157: 'comb29_A-881757_Igneous__Gabbroic__A-881757_Lunar_Gabbrocontaining...', 158: 'cqmb29_A-881757_Igneous__Gabbroic__A-881757_Lunar_Gabbrocontaining...', 159: 'cslm01_Y-791197_72_Antarctic_Meteorite_of_Presumed_Lunar_Origin', 160: 'sblm02_Y-791197_90_Antarctic_Meteorite_of_Presumed_Lunar_Origin', 161: 'sblm03_Y-791197_90_Ground_portion_of_LM-LAM-002', 162: 'sslm01_Y-791197_72_Antarctic_Meteorite_of_Presumed_Lunar_Origin'}

file_with_pixels = np.load(r"pixel_vector_data_train_files_transformed.npy")

test_spectrum = file_with_pixels[250]

def test_cnn(model, test_spectrum):
    pred = np.argmin(model.predict(test_spectrum))
    return table[pred]
         
print(test_cnn(tf.keras.models.load_model('CNN_model.keras'), test_spectrum))